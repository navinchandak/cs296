<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CS296 Base Code Documentation: src/dominos.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CS296 Base Code Documentation
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">This is the base code for CS296 Software Systems Lab</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">src/dominos.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="dominos_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2006-2009 Erin Catto http://www.box2d.org</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This software is provided &#39;as-is&#39;, without any express or implied</span>
<a name="l00005"></a>00005 <span class="comment"> * warranty.  In no event will the authors be held liable for any damages</span>
<a name="l00006"></a>00006 <span class="comment"> * arising from the use of this software.</span>
<a name="l00007"></a>00007 <span class="comment"> * Permission is granted to anyone to use this software for any purpose,</span>
<a name="l00008"></a>00008 <span class="comment"> * including commercial applications, and to alter it and redistribute it</span>
<a name="l00009"></a>00009 <span class="comment"> * freely, subject to the following restrictions:</span>
<a name="l00010"></a>00010 <span class="comment"> * 1. The origin of this software must not be misrepresented; you must not</span>
<a name="l00011"></a>00011 <span class="comment"> * claim that you wrote the original software. If you use this software</span>
<a name="l00012"></a>00012 <span class="comment"> * in a product, an acknowledgment in the product documentation would be</span>
<a name="l00013"></a>00013 <span class="comment"> * appreciated but is not required.</span>
<a name="l00014"></a>00014 <span class="comment"> * 2. Altered source versions must be plainly marked as such, and must not be</span>
<a name="l00015"></a>00015 <span class="comment"> * misrepresented as being the original software.</span>
<a name="l00016"></a>00016 <span class="comment"> * 3. This notice may not be removed or altered from any source distribution.</span>
<a name="l00017"></a>00017 <span class="comment"> */</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="comment">/* </span>
<a name="l00020"></a>00020 <span class="comment"> * Base code for CS 296 Software Systems Lab </span>
<a name="l00021"></a>00021 <span class="comment"> * Department of Computer Science and Engineering, IIT Bombay</span>
<a name="l00022"></a>00022 <span class="comment"> * Instructor: Parag Chaudhuri</span>
<a name="l00023"></a>00023 <span class="comment"> */</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#include&lt;cmath&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="cs296__base_8hpp.html">cs296_base.hpp</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="render_8hpp.html">render.hpp</a>&quot;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#ifdef __APPLE__</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#include &lt;GLUT/glut.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#else</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#include &quot;GL/freeglut.h&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#endif</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;cstring&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;cstdio&gt;</span>
<a name="l00037"></a>00037 <span class="keyword">using namespace </span>std;
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="dominos_8hpp.html">dominos.hpp</a>&quot;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="keyword">namespace </span>cs296
<a name="l00042"></a>00042 {
<a name="l00043"></a><a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">00043</a> <span class="preprocessor">#define PI 3.14159265</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 <span class="comment">//a function which helps in drawing an arc, givng it&#39;s radius , centre, and the angle made at the centre by the arc</span>
<a name="l00046"></a>00046 <span class="comment">// numP being the no of points and vs being the vector to which points on the arc are set.</span>
<a name="l00047"></a><a class="code" href="classcs296_1_1dominos__t.html#a0cd16d987ad8dffaa29de0ca88990eb4">00047</a>     <span class="keywordtype">void</span> dominos_t::getArcVec(<span class="keywordtype">float</span> xC,<span class="keywordtype">float</span> yC,<span class="keywordtype">float</span> r,<span class="keywordtype">float</span> sA,<span class="keywordtype">float</span> eA,b2Vec2* vs,<span class="keywordtype">int</span> numP){
<a name="l00048"></a>00048 
<a name="l00049"></a>00049         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;numP;i++)
<a name="l00050"></a>00050         {
<a name="l00051"></a>00051             <span class="keywordtype">float</span> theta = (sA) + ((eA-sA)/(numP-1))*i;
<a name="l00052"></a>00052             vs[i].Set(xC+r*sin(theta), yC+r*cos(theta));
<a name="l00053"></a>00053         }
<a name="l00054"></a>00054 
<a name="l00055"></a>00055     }
<a name="l00056"></a>00056     
<a name="l00057"></a>00057     <span class="comment">// a function for drawing a chain passing through points specified by vs and numP being no of points</span>
<a name="l00058"></a><a class="code" href="classcs296_1_1dominos__t.html#aadbad4319be16f9c591c56c6366aa857">00058</a>     <span class="keywordtype">void</span> dominos_t::drawChain(b2Vec2* vs,<span class="keywordtype">int</span> numP){
<a name="l00059"></a>00059         b2BodyDef bd;
<a name="l00060"></a>00060         b2Body* eyePlace=m_world-&gt;CreateBody(&amp;bd);
<a name="l00061"></a>00061         b2ChainShape chain;
<a name="l00062"></a>00062         chain.CreateChain(vs,numP);
<a name="l00063"></a>00063         eyePlace-&gt;CreateFixture(&amp;chain,0.0f);
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     }
<a name="l00066"></a>00066     
<a name="l00067"></a>00067     <span class="comment">// a function for creating a box (both dynamic and static at the desired position)</span>
<a name="l00068"></a><a class="code" href="classcs296_1_1dominos__t.html#a6c1e20d5077789652b39987fd21ee8bb">00068</a>     b2Body* dominos_t::drawBox(<span class="keywordtype">float</span> xC,<span class="keywordtype">float</span> yC,b2FixtureDef* fixture, <span class="keywordtype">bool</span> isDynamic=<span class="keyword">false</span>){
<a name="l00069"></a>00069             b2BodyDef bd;
<a name="l00070"></a>00070             <span class="keywordflow">if</span>(isDynamic){
<a name="l00071"></a>00071                 bd.type=b2_dynamicBody;
<a name="l00072"></a>00072             }
<a name="l00073"></a>00073             bd.position.Set(xC, yC);
<a name="l00074"></a>00074             b2Body* ground = m_world-&gt;CreateBody(&amp;bd);
<a name="l00075"></a>00075             ground-&gt;CreateFixture(fixture);
<a name="l00076"></a>00076             <span class="keywordflow">return</span> ground;
<a name="l00077"></a>00077     }
<a name="l00078"></a>00078     
<a name="l00079"></a>00079     <span class="comment">//a function which makes a joint between two given bodies a,b</span>
<a name="l00080"></a><a class="code" href="classcs296_1_1dominos__t.html#a59aeb34aee3139c5cefbca5803c47977">00080</a>     <span class="keywordtype">void</span> dominos_t::makeJoint(b2Body* a, b2Body* b ){
<a name="l00081"></a>00081             b2RevoluteJointDef jointDef;
<a name="l00082"></a>00082             jointDef.bodyA = a;
<a name="l00083"></a>00083             jointDef.bodyB = b;
<a name="l00084"></a>00084             jointDef.localAnchorA.Set(0.0f,0.0f);
<a name="l00085"></a>00085             jointDef.localAnchorB.Set(0.0f,0.0f);
<a name="l00086"></a>00086             m_world-&gt;CreateJoint(&amp;jointDef);
<a name="l00087"></a>00087     }
<a name="l00088"></a>00088     
<a name="l00089"></a>00089     
<a name="l00090"></a>00090     <span class="comment">//a function for creating a box with the required parameters</span>
<a name="l00091"></a><a class="code" href="classcs296_1_1dominos__t.html#a3932f8b0867a4e49dd7ba794fafab3a1">00091</a>     b2Body* dominos_t::drawBox(<span class="keywordtype">float</span> xC,<span class="keywordtype">float</span> yC,<span class="keywordtype">float</span> lby2,<span class="keywordtype">float</span> bby2,<span class="keywordtype">bool</span> isDynamic=<span class="keyword">false</span>,<span class="keywordtype">float</span> angle=0,<span class="keywordtype">float</span> density=0){
<a name="l00092"></a>00092             b2PolygonShape shape;
<a name="l00093"></a>00093             shape.SetAsBox(lby2, bby2);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095             b2BodyDef bd;
<a name="l00096"></a>00096             <span class="keywordflow">if</span>(isDynamic){
<a name="l00097"></a>00097                 bd.type=b2_dynamicBody;
<a name="l00098"></a>00098             }
<a name="l00099"></a>00099             bd.angle=angle;
<a name="l00100"></a>00100             bd.position.Set(xC, yC);
<a name="l00101"></a>00101             b2Body* ground = m_world-&gt;CreateBody(&amp;bd);
<a name="l00102"></a>00102             ground-&gt;CreateFixture(&amp;shape, 0.0f);
<a name="l00103"></a>00103             <span class="keywordflow">return</span> ground;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     }
<a name="l00107"></a>00107     <span class="comment">//function for drawing an arc</span>
<a name="l00108"></a><a class="code" href="classcs296_1_1dominos__t.html#a09d57cd88fd85fcd811b068f02cce756">00108</a>     <span class="keywordtype">void</span> dominos_t::drawArc(<span class="keywordtype">float</span> xC,<span class="keywordtype">float</span> yC,<span class="keywordtype">float</span> r,<span class="keywordtype">float</span> sA,<span class="keywordtype">float</span> eA,<span class="keywordtype">int</span> numP){
<a name="l00109"></a>00109         b2Vec2 vs[numP];
<a name="l00110"></a>00110         getArcVec(xC,yC,r,sA,eA,vs,numP);
<a name="l00111"></a>00111         drawChain(vs,numP);
<a name="l00112"></a>00112     }
<a name="l00113"></a>00113     <span class="comment">//function for drawing a sphere with xC and Yc as centre and r as radius with density friction and restitution as a,b,c respectively</span>
<a name="l00114"></a><a class="code" href="classcs296_1_1dominos__t.html#af4a638336b3efdcf92e643f7f81cdb19">00114</a>     b2Body* dominos_t::drawSphere(<span class="keywordtype">float</span> xC,<span class="keywordtype">float</span> yC,<span class="keywordtype">float</span> r,<span class="keywordtype">float</span> a,<span class="keywordtype">float</span> b, <span class="keywordtype">float</span> c){
<a name="l00115"></a>00115     
<a name="l00116"></a>00116         b2Body* spherebody;         
<a name="l00117"></a>00117         b2CircleShape circle;
<a name="l00118"></a>00118         circle.m_radius = r;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120         b2FixtureDef ballfd;
<a name="l00121"></a>00121         ballfd.shape = &amp;circle;
<a name="l00122"></a>00122         ballfd.density = a;
<a name="l00123"></a>00123         ballfd.friction = b;
<a name="l00124"></a>00124         ballfd.restitution = c;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126         b2BodyDef ballbd;
<a name="l00127"></a>00127         ballbd.type = b2_dynamicBody;
<a name="l00128"></a>00128         ballbd.position.Set(xC,yC);
<a name="l00129"></a>00129         spherebody = m_world-&gt;CreateBody(&amp;ballbd);
<a name="l00130"></a>00130         spherebody-&gt;CreateFixture(&amp;ballfd);
<a name="l00131"></a>00131         <span class="keywordflow">return</span> spherebody;
<a name="l00132"></a>00132     }
<a name="l00133"></a>00133     
<a name="l00134"></a>00134     <span class="comment">//function for creating a platform</span>
<a name="l00135"></a><a class="code" href="classcs296_1_1dominos__t.html#a251dd19568c6ac9c0f57055279414465">00135</a>     <span class="keywordtype">void</span> dominos_t::drawPlatform(b2Vec2 a,b2Vec2 b)
<a name="l00136"></a>00136     {       
<a name="l00137"></a>00137         b2Body* platform;
<a name="l00138"></a>00138         b2EdgeShape shape;
<a name="l00139"></a>00139         shape.Set(a, b);
<a name="l00140"></a>00140         b2BodyDef bd;
<a name="l00141"></a>00141         platform = m_world-&gt;CreateBody(&amp;bd);
<a name="l00142"></a>00142         platform-&gt;CreateFixture(&amp;shape, 0.0f);
<a name="l00143"></a>00143     }
<a name="l00144"></a>00144 
<a name="l00145"></a><a class="code" href="classcs296_1_1dominos__t.html#ae67e4cb8918e0b8316c225a21ba169b4">00145</a>     dominos_t::dominos_t()
<a name="l00146"></a>00146     {   
<a name="l00150"></a>00150         {
<a name="l00151"></a>00151             b2Vec2 vs[2];
<a name="l00152"></a>00152             vs[0].Set(-90.0f,0.0f);
<a name="l00153"></a>00153             vs[1].Set(90.0,0.0);
<a name="l00154"></a>00154             drawChain(vs,2);
<a name="l00155"></a>00155         }
<a name="l00158"></a>00158         {   
<a name="l00159"></a>00159 
<a name="l00161"></a>00161             drawBox(-48.5,40.0,1.6,0.15);
<a name="l00162"></a>00162             b2Body* spherebody=drawSphere(-48.5,40.5,0.5,1.0f,0.0f,0.85f);      
<a name="l00163"></a>00163             
<a name="l00165"></a>00165             b2Vec2 force = b2Vec2(110,0);
<a name="l00166"></a>00166             spherebody-&gt;ApplyForce(force, spherebody-&gt;GetPosition());
<a name="l00170"></a>00170             drawBox(-43.8,35.0,3.6,0.15);
<a name="l00172"></a>00172             b2Body* body1=drawBox(-40.2,36.8,0.15,1.8);
<a name="l00173"></a>00173         
<a name="l00174"></a>00174 
<a name="l00175"></a>00175             <span class="comment">//The small vertical support to the lever </span>
<a name="l00176"></a>00176             <span class="comment">//drawBox(b2Vec2(-41.5,38.15 ),b2Vec2(-41.3,38.15));</span>
<a name="l00177"></a>00177             drawBox(-41.4,36.7,0.15,1.45);
<a name="l00178"></a>00178         
<a name="l00179"></a>00179 
<a name="l00181"></a>00181             {
<a name="l00183"></a>00183             b2BodyDef *bd = <span class="keyword">new</span> b2BodyDef;
<a name="l00184"></a>00184             bd-&gt;type = b2_dynamicBody;
<a name="l00185"></a>00185             bd-&gt;position.Set(-40.2f,38.65f);        
<a name="l00186"></a>00186             
<a name="l00188"></a>00188 
<a name="l00191"></a>00191             b2FixtureDef *fd1 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00192"></a>00192             fd1-&gt;density = 5.0;
<a name="l00193"></a>00193             fd1-&gt;friction = 0.5;
<a name="l00194"></a>00194             fd1-&gt;restitution = 0.f;
<a name="l00195"></a>00195             fd1-&gt;shape = <span class="keyword">new</span> b2PolygonShape;
<a name="l00196"></a>00196             b2PolygonShape bs1;
<a name="l00197"></a>00197             bs1.SetAsBox(2.8,0.15, b2Vec2(-0.8f,-0.2f), 0);
<a name="l00198"></a>00198             fd1-&gt;shape = &amp;bs1;
<a name="l00201"></a>00201             b2FixtureDef *fd2 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00202"></a>00202             fd2-&gt;density = 5.0;
<a name="l00203"></a>00203             fd2-&gt;friction = 0.5;
<a name="l00204"></a>00204             fd2-&gt;restitution = 0.f;
<a name="l00205"></a>00205             fd2-&gt;shape = <span class="keyword">new</span> b2PolygonShape;
<a name="l00206"></a>00206             b2PolygonShape bs2;
<a name="l00207"></a>00207             bs2.SetAsBox(0.15,0.4, b2Vec2(2.15f,0.05f), 0);
<a name="l00208"></a>00208             fd2-&gt;shape = &amp;bs2;
<a name="l00211"></a>00211             b2FixtureDef *fd3 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00212"></a>00212             fd3-&gt;density = 5.0;
<a name="l00213"></a>00213             fd3-&gt;friction = 0.5;
<a name="l00214"></a>00214             fd3-&gt;restitution = 0.f;
<a name="l00215"></a>00215             fd3-&gt;shape = <span class="keyword">new</span> b2PolygonShape;
<a name="l00216"></a>00216             b2PolygonShape bs3;
<a name="l00217"></a>00217             bs3.SetAsBox(0.50,0.15, b2Vec2(2.60f,0.4f), 0);
<a name="l00218"></a>00218             fd3-&gt;shape = &amp;bs3;
<a name="l00220"></a>00220             b2Body* body2 = m_world-&gt;CreateBody(bd);
<a name="l00221"></a>00221             body2-&gt;CreateFixture(fd1);
<a name="l00222"></a>00222             body2-&gt;CreateFixture(fd2);
<a name="l00223"></a>00223             body2-&gt;CreateFixture(fd3);
<a name="l00225"></a>00225             b2RevoluteJointDef jointDef;
<a name="l00226"></a>00226             jointDef.bodyA = body1;
<a name="l00227"></a>00227             jointDef.bodyB = body2;
<a name="l00228"></a>00228             jointDef.localAnchorA.Set(0.0f,1.60f);
<a name="l00229"></a>00229             jointDef.localAnchorB.Set(0.0f,-0.15f);
<a name="l00230"></a>00230             <span class="comment">//jointDef.collideConnected = false;</span>
<a name="l00231"></a>00231             m_world-&gt;CreateJoint(&amp;jointDef);
<a name="l00232"></a>00232             }
<a name="l00233"></a>00233         
<a name="l00234"></a>00234 
<a name="l00239"></a>00239             drawBox(-36.8,38.1,0.4,0.15);
<a name="l00240"></a>00240             drawSphere(-36.8,38.15,0.5,8.0,0.6,0);
<a name="l00241"></a>00241             <span class="comment">//drawBox(-36.6,38,0.4,0.15);</span>
<a name="l00242"></a>00242             <span class="comment">//drawSphere(-36.6,38.4,0.5,8.0,0.3,0);</span>
<a name="l00243"></a>00243         
<a name="l00246"></a>00246             drawBox(-33.5,35.0,3.0,0.15,<span class="keyword">false</span>,3.14-0.2);
<a name="l00247"></a>00247 
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250         {   
<a name="l00251"></a>00251 
<a name="l00252"></a>00252 
<a name="l00253"></a>00253             b2BodyDef bd;
<a name="l00254"></a>00254             bd.type = b2_dynamicBody;
<a name="l00255"></a>00255             bd.position.Set(-21.0f, 31.0f);
<a name="l00256"></a>00256             b2Body* plank = m_world-&gt;CreateBody(&amp;bd);
<a name="l00257"></a>00257 
<a name="l00259"></a>00259             b2FixtureDef *fd1 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00260"></a>00260             fd1-&gt;density = 5.0;
<a name="l00261"></a>00261             fd1-&gt;friction = 0.7;
<a name="l00262"></a>00262             fd1-&gt;restitution = 0.f;
<a name="l00263"></a>00263             b2PolygonShape shape1;
<a name="l00264"></a>00264             shape1.SetAsBox(8.0f, 0.15f, b2Vec2(-3.0f,0.0f),0);     
<a name="l00265"></a>00265             fd1-&gt;shape = &amp;shape1;
<a name="l00267"></a>00267             b2FixtureDef *fd2 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00268"></a>00268             fd2-&gt;density = 7.5f;
<a name="l00269"></a>00269             fd2-&gt;friction = 0.0f;
<a name="l00270"></a>00270             fd2-&gt;restitution = 0.85f;
<a name="l00271"></a>00271             b2PolygonShape shape;
<a name="l00272"></a>00272             shape.SetAsBox(0.8f, 0.8f, b2Vec2(4.2f,0.8f),0);            
<a name="l00273"></a>00273             fd2-&gt;shape = &amp;shape;
<a name="l00275"></a>00275             plank-&gt;CreateFixture(fd1);
<a name="l00276"></a>00276             plank-&gt;CreateFixture(fd2);
<a name="l00277"></a>00277             
<a name="l00279"></a>00279             b2Body* pivot=drawBox(-21.0,31.0,0.15,0.15);
<a name="l00281"></a>00281             b2RevoluteJointDef jointDef;
<a name="l00282"></a>00282             jointDef.bodyA = plank;
<a name="l00283"></a>00283             jointDef.bodyB = pivot;
<a name="l00284"></a>00284             jointDef.localAnchorA.Set(0.0f,0.0f);
<a name="l00285"></a>00285             jointDef.localAnchorB.Set(0.0f,0.0f);
<a name="l00286"></a>00286             m_world-&gt;CreateJoint(&amp;jointDef);                    
<a name="l00287"></a>00287 
<a name="l00288"></a>00288         }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 
<a name="l00294"></a>00294 
<a name="l00296"></a>00296         {   
<a name="l00297"></a>00297             drawPlatform(b2Vec2(-55.0f,3.0f), b2Vec2(-30.0f, 3.0f));
<a name="l00298"></a>00298 
<a name="l00300"></a>00300 
<a name="l00303"></a>00303             b2PolygonShape poly;
<a name="l00304"></a>00304             b2Vec2 vertices[3];
<a name="l00305"></a>00305             vertices[0].Set(-1,0);
<a name="l00306"></a>00306             vertices[1].Set(1,0);
<a name="l00307"></a>00307             vertices[2].Set(0,4.0);
<a name="l00308"></a>00308             poly.Set(vertices, 3);
<a name="l00309"></a>00309             b2FixtureDef wedgefd;
<a name="l00310"></a>00310             wedgefd.shape = &amp;poly;
<a name="l00311"></a>00311             wedgefd.density = 10.0f;
<a name="l00312"></a>00312             wedgefd.friction = 0.0f;
<a name="l00313"></a>00313             wedgefd.restitution = 1.0f;
<a name="l00314"></a>00314             b2BodyDef wedgebd;
<a name="l00315"></a>00315             wedgebd.position.Set(-36.7f, 3.0f);
<a name="l00316"></a>00316             b2Body* sbody = m_world-&gt;CreateBody(&amp;wedgebd);
<a name="l00317"></a>00317             sbody-&gt;CreateFixture(&amp;wedgefd);
<a name="l00318"></a>00318 
<a name="l00320"></a>00320             b2FixtureDef *fd2 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00321"></a>00321             fd2-&gt;density = 0.5f;
<a name="l00322"></a>00322             b2PolygonShape shape;
<a name="l00323"></a>00323             shape.SetAsBox(4.70f, 0.15f);
<a name="l00324"></a>00324             fd2-&gt;shape = &amp;shape;
<a name="l00325"></a>00325             b2Body* body=drawBox( -36.7,7.0,fd2,<span class="keyword">true</span>);
<a name="l00327"></a>00327             b2RevoluteJointDef jd;
<a name="l00328"></a>00328             b2Vec2 anchor;
<a name="l00329"></a>00329             anchor.Set(-36.7f, 7.0f);
<a name="l00330"></a>00330             jd.Initialize(sbody, body, anchor);
<a name="l00331"></a>00331             m_world-&gt;CreateJoint(&amp;jd);
<a name="l00332"></a>00332 
<a name="l00333"></a>00333             <span class="comment">//fd4 is the fixture for the two boxes which are kept on top of the plank</span>
<a name="l00334"></a>00334             b2FixtureDef *fd4 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00335"></a>00335             fd4-&gt;density = 0.7f;
<a name="l00336"></a>00336             b2PolygonShape shape3;
<a name="l00337"></a>00337             shape3.SetAsBox(0.5f, 0.5f);
<a name="l00338"></a>00338             fd4-&gt;shape = &amp;shape3;
<a name="l00340"></a>00340             drawBox(-40.9,7.5,fd4,<span class="keyword">true</span>);
<a name="l00342"></a>00342             drawBox(-32.5,7.5,fd4,<span class="keyword">true</span>);
<a name="l00343"></a>00343 
<a name="l00344"></a>00344         }            
<a name="l00347"></a>00347         {
<a name="l00350"></a>00350             b2Vec2 vs[3];
<a name="l00351"></a>00351             vs[0].Set(-10.0f, 40.0f);
<a name="l00352"></a>00352             vs[1].Set(-5.50f, 40.0f);
<a name="l00353"></a>00353             vs[2].Set(42.0f, 34.0f);
<a name="l00355"></a>00355             drawChain(vs,3);
<a name="l00357"></a>00357             drawSphere(-6.7,40.8,0.8,0.8,0,0.5);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359 
<a name="l00360"></a>00360                                                                                                 
<a name="l00361"></a>00361         }
<a name="l00362"></a>00362 
<a name="l00365"></a>00365         {
<a name="l00367"></a>00367 
<a name="l00370"></a>00370             b2FixtureDef *fd1 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00371"></a>00371             fd1-&gt;density = 2.0;
<a name="l00372"></a>00372             fd1-&gt;friction = 0.7;
<a name="l00373"></a>00373             fd1-&gt;restitution = 0.6f;
<a name="l00374"></a>00374             b2PolygonShape shape1;
<a name="l00375"></a>00375             shape1.SetAsBox(0.15f, 2.0f, b2Vec2(0.0f,0.0f),0);          
<a name="l00376"></a>00376             fd1-&gt;shape = &amp;shape1;
<a name="l00379"></a>00379             b2FixtureDef *fd2 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00380"></a>00380             b2PolygonShape shape2;
<a name="l00381"></a>00381             shape2.SetAsBox(0.15f, 0.15f, b2Vec2(0.0f,0.0f),0);
<a name="l00382"></a>00382             fd2-&gt;shape=&amp;shape2;
<a name="l00383"></a>00383 
<a name="l00385"></a>00385             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;5;i++)        
<a name="l00386"></a>00386             {
<a name="l00388"></a>00388                 b2Body* plank=drawBox(42.50f - (i%2)*0.7, 33.0f - 3*i,fd1,<span class="keyword">true</span>);
<a name="l00390"></a>00390                 b2Body* pivot=drawBox(42.50f - (i%2)*0.7 , 33.0f - 3*i,fd2);
<a name="l00391"></a>00391 
<a name="l00392"></a>00392                 <span class="comment">//jointDef.collideConnected = false;</span>
<a name="l00394"></a>00394 <span class="comment"></span>                b2RevoluteJointDef jointDef;    
<a name="l00395"></a>00395                 jointDef.bodyA = plank;
<a name="l00396"></a>00396                 jointDef.bodyB = pivot;
<a name="l00397"></a>00397                 jointDef.localAnchorA.Set(0.0f,0.0f);
<a name="l00398"></a>00398                 jointDef.localAnchorB.Set(0.0f,0.0f);
<a name="l00399"></a>00399                 m_world-&gt;CreateJoint(&amp;jointDef);
<a name="l00400"></a>00400             }
<a name="l00401"></a>00401         }
<a name="l00402"></a>00402         
<a name="l00405"></a>00405         {
<a name="l00407"></a>00407             b2Vec2 vs[10];
<a name="l00408"></a>00408             vs[0].Set(41.80f, 19.0f);
<a name="l00409"></a>00409             vs[1].Set(36.50f, 19.0f);
<a name="l00410"></a>00410             vs[2].Set(35.750f, 18.75f);
<a name="l00411"></a>00411             vs[3].Set(35.50f, 18.50f);
<a name="l00412"></a>00412             vs[4].Set(35.35f, 18.30f);
<a name="l00413"></a>00413             vs[5].Set(31.35f, 13.50f);
<a name="l00414"></a>00414             vs[6].Set(31.10f, 13.30f);
<a name="l00415"></a>00415             vs[7].Set(30.85f, 13.15f);
<a name="l00416"></a>00416             vs[8].Set(30.60f, 13.10f);
<a name="l00417"></a>00417             vs[9].Set(24.50f, 13.10f);
<a name="l00419"></a>00419             drawChain(vs,10);
<a name="l00421"></a>00421             drawSphere(41.4,19.4,0.4,0.4,0,0.5);
<a name="l00422"></a>00422             drawSphere(39.4,19.4,0.4,0.4,0,0.5);
<a name="l00423"></a>00423         }   
<a name="l00425"></a>00425         { 
<a name="l00426"></a>00426             b2FixtureDef *fd1 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00427"></a>00427             fd1-&gt;density = 2.35;
<a name="l00428"></a>00428             fd1-&gt;friction = 0.7;
<a name="l00429"></a>00429             fd1-&gt;restitution = 0.60f;
<a name="l00430"></a>00430             b2PolygonShape shape1;
<a name="l00431"></a>00431             shape1.SetAsBox(0.1f, 2.0f, b2Vec2(0.0f,0.0f),0);       
<a name="l00432"></a>00432             fd1-&gt;shape = &amp;shape1;
<a name="l00434"></a>00434             b2Body* plank=drawBox(22.50f,13.0f,fd1,<span class="keyword">true</span>);
<a name="l00436"></a>00436             b2Body* pivot=drawBox(22.5,13.0,0.1,0.1);
<a name="l00437"></a>00437 
<a name="l00438"></a>00438 
<a name="l00440"></a>00440             makeJoint(plank,pivot);
<a name="l00441"></a>00441         }
<a name="l00443"></a>00443         {
<a name="l00444"></a>00444             b2Vec2 vs[2];
<a name="l00445"></a>00445             vs[0].Set(20.0f, 13.10f);
<a name="l00446"></a>00446             vs[1].Set(3.75f, 13.10f);           
<a name="l00448"></a>00448             drawChain(vs,2);
<a name="l00449"></a>00449 
<a name="l00450"></a>00450         }
<a name="l00452"></a>00452         {   
<a name="l00453"></a>00453             b2Vec2 vs[46];
<a name="l00454"></a>00454             <span class="comment">//vs 0 is the long straight part towards the right </span>
<a name="l00455"></a>00455             vs[0].Set(25.50f, 12.50f);
<a name="l00456"></a>00456             <span class="comment">//vs[1] to vs[5] represents the curve</span>
<a name="l00457"></a>00457             vs[1].Set(20.50f, 5.0f);
<a name="l00458"></a>00458             vs[2].Set(20.25f, 4.75f);
<a name="l00459"></a>00459             vs[3].Set(20.00f, 4.60f);
<a name="l00460"></a>00460             vs[4].Set(19.80f, 4.50f);
<a name="l00461"></a>00461             vs[5].Set(19.65f, 4.45f);
<a name="l00462"></a>00462             <span class="comment">//vs[5] to vs[6] is the long straight part at bottom</span>
<a name="l00463"></a>00463             vs[6].Set(-4.65f, 4.45f);
<a name="l00465"></a>00465             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;=30; i++)
<a name="l00466"></a>00466             {
<a name="l00467"></a>00467                 vs[i+6].Set(0 - sqrt(abs(pow(3.75,2) - pow(4.45 + 0.25*i - 8.2,2))) - 4.65, 4.45 + 0.25*i);
<a name="l00468"></a>00468             }       
<a name="l00470"></a>00470             vs[37].Set(-4.35f, 11.90f);
<a name="l00471"></a>00471             vs[38].Set(-4.10f, 11.85f);
<a name="l00472"></a>00472             vs[39].Set(-3.90f, 11.80f);
<a name="l00473"></a>00473             vs[40].Set(-3.75f, 11.75f);
<a name="l00474"></a>00474             vs[41].Set(-3.85f, 11.70f);
<a name="l00475"></a>00475             vs[42].Set(-3.80f, 11.65f);
<a name="l00476"></a>00476             vs[43].Set(-3.76f, 11.60f);
<a name="l00477"></a>00477             vs[44].Set(-3.73f, 11.55f);
<a name="l00478"></a>00478             vs[45].Set(-3.71f, 11.50f);
<a name="l00480"></a>00480             drawChain(vs,46);
<a name="l00481"></a>00481 
<a name="l00483"></a>00483             drawSphere(0,4.85,0.4,0.3,0,1);
<a name="l00484"></a>00484 
<a name="l00485"></a>00485         }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487         {
<a name="l00488"></a>00488             b2Vec2 vs[2];
<a name="l00489"></a>00489             vs[0].Set(-4.65f, 6.2f);
<a name="l00490"></a>00490             vs[1].Set(12.50f, 6.2f);
<a name="l00492"></a>00492             drawChain(vs,2);
<a name="l00495"></a>00495             b2PolygonShape poly;
<a name="l00496"></a>00496             b2Vec2 vertices[3];
<a name="l00497"></a>00497             vertices[0].Set(-1,0);
<a name="l00498"></a>00498             vertices[1].Set(1,0);
<a name="l00499"></a>00499             vertices[2].Set(0,2.0);
<a name="l00500"></a>00500             poly.Set(vertices, 3);
<a name="l00502"></a>00502             b2FixtureDef wedgefd;
<a name="l00503"></a>00503             wedgefd.shape = &amp;poly;
<a name="l00504"></a>00504             wedgefd.density = 10.0f;
<a name="l00505"></a>00505             wedgefd.friction = 0.0f;
<a name="l00506"></a>00506             wedgefd.restitution = 1.0f;
<a name="l00507"></a>00507             b2BodyDef wedgebd;
<a name="l00509"></a>00509             wedgebd.position.Set(0.0f, 6.20f);
<a name="l00511"></a>00511             b2Body* sbody = m_world-&gt;CreateBody(&amp;wedgebd);
<a name="l00512"></a>00512             sbody-&gt;CreateFixture(&amp;wedgefd);
<a name="l00514"></a>00514 
<a name="l00516"></a>00516             b2PolygonShape shape;
<a name="l00517"></a>00517             shape.SetAsBox(5.0f, 0.15f, b2Vec2(0.0f,0.0f), 0);
<a name="l00518"></a>00518             b2FixtureDef *fd2 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00519"></a>00519             fd2-&gt;density = 0.5f;
<a name="l00520"></a>00520             fd2-&gt;shape = <span class="keyword">new</span> b2PolygonShape;
<a name="l00521"></a>00521             fd2-&gt;shape = &amp;shape;
<a name="l00522"></a>00522             <span class="comment">//drawBox(0,8.2,5,0.15,true,0,0.5);</span>
<a name="l00524"></a>00524 <span class="comment"></span>            b2PolygonShape bs1;
<a name="l00525"></a>00525             b2Vec2 vertices1[4];
<a name="l00526"></a>00526             vertices1[0].Set(2.0f,0.0f);
<a name="l00527"></a>00527             vertices1[1].Set(5.0f,0.0f);
<a name="l00528"></a>00528             vertices1[2].Set(5.0f,3.15f);
<a name="l00529"></a>00529             vertices1[3].Set(2.0f,4.40f);
<a name="l00531"></a>00531             b2FixtureDef *fd1 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00532"></a>00532             bs1.Set(vertices1, 4);
<a name="l00533"></a>00533             fd1-&gt;shape = &amp;bs1;
<a name="l00535"></a>00535             b2BodyDef bd2;
<a name="l00536"></a>00536             bd2.position.Set(0.0f, 8.2f);
<a name="l00537"></a>00537             bd2.type = b2_dynamicBody;
<a name="l00538"></a>00538             b2Body* body = m_world-&gt;CreateBody(&amp;bd2);
<a name="l00539"></a>00539             body-&gt;CreateFixture(fd1);           
<a name="l00540"></a>00540             body-&gt;CreateFixture(fd2);
<a name="l00542"></a>00542             b2RevoluteJointDef jd;
<a name="l00543"></a>00543             b2Vec2 anchor;
<a name="l00544"></a>00544             anchor.Set(0.0f, 8.20f);
<a name="l00545"></a>00545             jd.Initialize(sbody, body, anchor);
<a name="l00546"></a>00546             m_world-&gt;CreateJoint(&amp;jd);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548         }
<a name="l00549"></a>00549 
<a name="l00550"></a>00550         {
<a name="l00551"></a>00551             
<a name="l00552"></a>00552             b2Vec2 vs[2];
<a name="l00553"></a>00553             vs[0].Set(0.0f, 13.10f);
<a name="l00554"></a>00554             vs[1].Set(-7.0f, 13.10f);       
<a name="l00556"></a>00556             drawChain(vs,2);
<a name="l00557"></a>00557         }
<a name="l00561"></a>00561         {   
<a name="l00563"></a>00563             b2PolygonShape shape1;
<a name="l00564"></a>00564             shape1.SetAsBox(0.15f, 5.0f, b2Vec2(0.0f,0.0f),0);          
<a name="l00565"></a>00565             b2FixtureDef *fd1 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00566"></a>00566             fd1-&gt;density = 0.6;
<a name="l00567"></a>00567             fd1-&gt;friction = 0.7;
<a name="l00568"></a>00568             fd1-&gt;restitution = 1.0f;
<a name="l00569"></a>00569             fd1-&gt;shape = &amp;shape1;
<a name="l00571"></a>00571             b2PolygonShape shape2;
<a name="l00572"></a>00572             shape2.SetAsBox(1.0f,0.15f, b2Vec2(0.0f,4.85f),0);          
<a name="l00573"></a>00573             b2FixtureDef *fd2 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00574"></a>00574             fd2-&gt;density = 0.6;
<a name="l00575"></a>00575             fd2-&gt;friction = 0.7;
<a name="l00576"></a>00576             fd2-&gt;restitution = 1.0f;
<a name="l00577"></a>00577             fd2-&gt;shape = &amp;shape2;
<a name="l00579"></a>00579             b2BodyDef bd;
<a name="l00580"></a>00580             bd.type = b2_dynamicBody;
<a name="l00581"></a>00581             bd.position.Set(-8.0f,18.0f);
<a name="l00582"></a>00582             b2Body* plank = m_world-&gt;CreateBody(&amp;bd);
<a name="l00584"></a>00584             plank-&gt;CreateFixture(fd1);              
<a name="l00585"></a>00585             plank-&gt;CreateFixture(fd2);              
<a name="l00586"></a>00586 
<a name="l00588"></a>00588             b2Body* pivot=drawBox(-8,18,0.15,0.15);
<a name="l00589"></a>00589 
<a name="l00591"></a>00591             makeJoint(plank,pivot);
<a name="l00592"></a>00592         }
<a name="l00594"></a>00594         {
<a name="l00596"></a>00596             drawPlatform(b2Vec2(-6.5f,21.5f), b2Vec2(-4.5f,21.5f));
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 
<a name="l00600"></a>00600 
<a name="l00602"></a>00602             b2BodyDef bd1;
<a name="l00603"></a>00603             bd1.type = b2_dynamicBody;
<a name="l00604"></a>00604             bd1.position.Set(-5.5f,22.2f);
<a name="l00605"></a>00605             b2Body* block = m_world-&gt;CreateBody(&amp;bd1);
<a name="l00606"></a>00606             b2PolygonShape square;
<a name="l00607"></a>00607             square.SetAsBox(0.7f,0.7f);         
<a name="l00608"></a>00608             b2FixtureDef *fd = <span class="keyword">new</span> b2FixtureDef;
<a name="l00609"></a>00609             fd-&gt;density = 5.80;
<a name="l00610"></a>00610             fd-&gt;friction = 0.0;
<a name="l00611"></a>00611             fd-&gt;restitution = 0.4f;
<a name="l00612"></a>00612             fd-&gt;shape = &amp;square;
<a name="l00613"></a>00613             block-&gt;CreateFixture(fd);
<a name="l00614"></a>00614 
<a name="l00615"></a>00615         }
<a name="l00616"></a>00616 
<a name="l00618"></a>00618         {
<a name="l00619"></a>00619         
<a name="l00621"></a>00621         
<a name="l00623"></a>00623             b2BodyDef *bd = <span class="keyword">new</span> b2BodyDef;
<a name="l00624"></a>00624             bd-&gt;type = b2_dynamicBody;
<a name="l00625"></a>00625             bd-&gt;position.Set(-2,19);
<a name="l00626"></a>00626             bd-&gt;fixedRotation = <span class="keyword">true</span>;
<a name="l00627"></a>00627 
<a name="l00629"></a>00629         
<a name="l00631"></a>00631             b2FixtureDef *fd1 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00632"></a>00632             fd1-&gt;density = 8.0;
<a name="l00633"></a>00633             fd1-&gt;friction = 0.5;
<a name="l00634"></a>00634             fd1-&gt;restitution = 0.f;
<a name="l00635"></a>00635             fd1-&gt;shape = <span class="keyword">new</span> b2PolygonShape;
<a name="l00636"></a>00636             b2PolygonShape bs1;
<a name="l00637"></a>00637             bs1.SetAsBox(1.5,0.2, b2Vec2(0.f,-1.4f), 0);
<a name="l00638"></a>00638             fd1-&gt;shape = &amp;bs1;
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 
<a name="l00642"></a>00642             b2FixtureDef *fd2 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00643"></a>00643 
<a name="l00644"></a>00644             fd2-&gt;density = 8.0;
<a name="l00645"></a>00645             fd2-&gt;friction = 0.5;
<a name="l00646"></a>00646             fd2-&gt;restitution = 0.f;
<a name="l00647"></a>00647             fd2-&gt;shape = <span class="keyword">new</span> b2PolygonShape;
<a name="l00648"></a>00648             b2PolygonShape bs2;
<a name="l00649"></a>00649             bs2.SetAsBox(0.2,1.5, b2Vec2(1.5f,0.f), 0);
<a name="l00650"></a>00650             fd2-&gt;shape = &amp;bs2;
<a name="l00651"></a>00651 
<a name="l00653"></a>00653             b2FixtureDef *fd3 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00654"></a>00654             fd3-&gt;density = 8.0;
<a name="l00655"></a>00655             fd3-&gt;friction = 0.5;
<a name="l00656"></a>00656             fd3-&gt;restitution = 0.f;
<a name="l00657"></a>00657             fd3-&gt;shape = <span class="keyword">new</span> b2PolygonShape;
<a name="l00658"></a>00658             b2PolygonShape bs3;
<a name="l00659"></a>00659             bs3.SetAsBox(0.2,1.5, b2Vec2(-1.5f,0.f), 0);
<a name="l00660"></a>00660             fd3-&gt;shape = &amp;bs3;
<a name="l00662"></a>00662             b2Body* box1 = m_world-&gt;CreateBody(bd);
<a name="l00663"></a>00663             box1-&gt;CreateFixture(fd1);
<a name="l00664"></a>00664             box1-&gt;CreateFixture(fd2);
<a name="l00665"></a>00665             box1-&gt;CreateFixture(fd3);
<a name="l00666"></a>00666 
<a name="l00668"></a>00668             
<a name="l00670"></a>00670             b2BodyDef *heavy = <span class="keyword">new</span> b2BodyDef;
<a name="l00671"></a>00671             heavy-&gt;type = b2_dynamicBody;
<a name="l00672"></a>00672             heavy-&gt;position.Set(20,33);
<a name="l00673"></a>00673             heavy-&gt;fixedRotation = <span class="keyword">true</span>;
<a name="l00674"></a>00674             
<a name="l00676"></a>00676             b2FixtureDef *fd4 = <span class="keyword">new</span> b2FixtureDef;
<a name="l00677"></a>00677             b2PolygonShape bs4;
<a name="l00678"></a>00678             bs4.SetAsBox(5.0,0.2);
<a name="l00679"></a>00679             fd4-&gt;shape = &amp;bs4;
<a name="l00680"></a>00680             fd4-&gt;friction = 1.0;
<a name="l00681"></a>00681             fd4-&gt;density = 7.20;      
<a name="l00682"></a>00682             b2Body* box2 = m_world-&gt;CreateBody(heavy);
<a name="l00683"></a>00683             
<a name="l00685"></a>00685             box2-&gt;CreateFixture(fd4);
<a name="l00686"></a>00686 
<a name="l00687"></a>00687 
<a name="l00689"></a>00689             
<a name="l00691"></a>00691             b2PulleyJointDef* myjoint = <span class="keyword">new</span> b2PulleyJointDef();
<a name="l00692"></a>00692             b2Vec2 worldAnchorOnBody1(-2, 19); 
<a name="l00693"></a>00693             b2Vec2 worldAnchorOnBody2(20, 33); 
<a name="l00694"></a>00694             b2Vec2 worldAnchorGround1(-2, 35); 
<a name="l00695"></a>00695             b2Vec2 worldAnchorGround2(20, 35); 
<a name="l00696"></a>00696             float32 ratio = 1.0f; <span class="comment">// Define ratio</span>
<a name="l00698"></a>00698 <span class="comment"></span>            myjoint-&gt;Initialize(box1, box2, worldAnchorGround1, worldAnchorGround2, box1-&gt;GetWorldCenter(), box2-&gt;GetWorldCenter(), ratio);
<a name="l00700"></a>00700             m_world-&gt;CreateJoint(myjoint);
<a name="l00701"></a>00701 
<a name="l00702"></a>00702         }   
<a name="l00704"></a>00704         {   
<a name="l00705"></a>00705 
<a name="l00707"></a>00707 
<a name="l00708"></a>00708 
<a name="l00709"></a>00709 
<a name="l00711"></a>00711             b2PolygonShape shape1;
<a name="l00712"></a>00712             shape1.SetAsBox(0.2f, 2.6f, b2Vec2(0.0f,0.0f),0);       
<a name="l00713"></a>00713             b2FixtureDef *fd = <span class="keyword">new</span> b2FixtureDef;
<a name="l00714"></a>00714             fd-&gt;density = 2.0;
<a name="l00715"></a>00715             fd-&gt;friction = 1.0;
<a name="l00716"></a>00716             fd-&gt;restitution = 0.6f;
<a name="l00717"></a>00717             fd-&gt;shape = &amp;shape1;
<a name="l00719"></a>00719             b2PolygonShape shape2;
<a name="l00720"></a>00720             shape2.SetAsBox(0.2f, 0.2f, b2Vec2(0.0f,0.0f),0);
<a name="l00721"></a>00721 
<a name="l00722"></a>00722             b2RevoluteJointDef jointDef;
<a name="l00724"></a>00724 
<a name="l00725"></a>00725 
<a name="l00726"></a>00726 
<a name="l00728"></a>00728             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;2;i++)        
<a name="l00729"></a>00729             {
<a name="l00730"></a>00730                 <span class="keywordtype">int</span> xAxis=16+8*i;
<a name="l00731"></a>00731                 <span class="keywordtype">int</span> dir;
<a name="l00732"></a>00732                 <span class="keywordflow">if</span>(i==0){
<a name="l00733"></a>00733                     dir=-1;
<a name="l00734"></a>00734                 }
<a name="l00735"></a>00735                 <span class="keywordflow">else</span>{
<a name="l00736"></a>00736                     dir=1;
<a name="l00737"></a>00737                 }
<a name="l00739"></a>00739 
<a name="l00742"></a>00742                 b2BodyDef bd;
<a name="l00743"></a>00743                 bd.type = b2_dynamicBody;
<a name="l00744"></a>00744                 bd.position.Set(xAxis,31);
<a name="l00745"></a>00745                 bd.angle = pow(-1,i%2)*0.7;
<a name="l00746"></a>00746                 b2Body* plank = m_world-&gt;CreateBody(&amp;bd);
<a name="l00747"></a>00747                 plank-&gt;CreateFixture(fd);               
<a name="l00748"></a>00748 
<a name="l00750"></a>00750                 b2BodyDef bd1;
<a name="l00751"></a>00751                 bd1.position.Set(xAxis,31);
<a name="l00752"></a>00752                 b2Body* pivot = m_world-&gt;CreateBody(&amp;bd1);
<a name="l00753"></a>00753                 pivot-&gt;CreateFixture(&amp;shape2,0.0f);         
<a name="l00754"></a>00754 
<a name="l00755"></a>00755                 <span class="comment">//jointDef.collideConnected = false;</span>
<a name="l00757"></a>00757 <span class="comment"></span>                jointDef.bodyA = plank;
<a name="l00758"></a>00758                 jointDef.bodyB = pivot;
<a name="l00759"></a>00759                 jointDef.localAnchorA.Set(0.0f,0.0f);
<a name="l00760"></a>00760                 jointDef.localAnchorB.Set(0.0f,0.0f);
<a name="l00761"></a>00761                 m_world-&gt;CreateJoint(&amp;jointDef);  
<a name="l00762"></a>00762 
<a name="l00764"></a>00764                 drawPlatform(b2Vec2(xAxis-1,28.1f),b2Vec2(xAxis+1,28.1f));
<a name="l00765"></a>00765         
<a name="l00766"></a>00766         
<a name="l00769"></a>00769                 drawSphere(xAxis,28.4f,0.6f,0.3f,0.0f,0.0f);    
<a name="l00770"></a>00770         
<a name="l00771"></a>00771         
<a name="l00772"></a>00772         <span class="comment">//arcs on which the spheres fall , they are positioned at a distance of 8 from each other, xAxis being 16 and 24 in the two iterations</span>
<a name="l00773"></a>00773         drawArc(xAxis,23,1,<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/2,(3/2.0)*<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>,30);
<a name="l00774"></a>00774 
<a name="l00775"></a>00775 
<a name="l00777"></a>00777                 {
<a name="l00778"></a>00778                 
<a name="l00780"></a>00780                     b2Vec2 vs[15];
<a name="l00781"></a>00781                     vs[0].Set(xAxis + dir*(3),29.1f);
<a name="l00782"></a>00782                     vs[1].Set(xAxis + dir*(2),27.1f);
<a name="l00783"></a>00783                     vs[2].Set(xAxis + dir*(1.85),27.0f);
<a name="l00784"></a>00784                     vs[3].Set(xAxis + dir*(1.70),26.9f);
<a name="l00785"></a>00785                     vs[4].Set(xAxis + dir*(1.55),26.8f);
<a name="l00786"></a>00786                     vs[5].Set(xAxis + dir*(1.40),26.7f);
<a name="l00787"></a>00787                     vs[6].Set(xAxis + dir*(1.40),25.5f);
<a name="l00789"></a>00789                     drawChain(vs,7);
<a name="l00790"></a>00790                     vs[0].Set(xAxis - dir*(0.7),27.0f);
<a name="l00791"></a>00791                     vs[1].Set(xAxis - dir*(0.7),25.5f);
<a name="l00792"></a>00792                     drawChain(vs,2); 
<a name="l00793"></a>00793 
<a name="l00794"></a>00794                 }
<a name="l00795"></a>00795 
<a name="l00796"></a>00796 
<a name="l00797"></a>00797             }
<a name="l00798"></a>00798         }
<a name="l00799"></a>00799 
<a name="l00800"></a>00800 
<a name="l00801"></a>00801 
<a name="l00802"></a>00802 
<a name="l00803"></a>00803         {
<a name="l00804"></a>00804 
<a name="l00805"></a>00805 
<a name="l00807"></a>00807 
<a name="l00808"></a>00808             <span class="keyword">const</span> <span class="keywordtype">int</span> num=6;
<a name="l00810"></a>00810 
<a name="l00812"></a>00812 
<a name="l00814"></a>00814             b2Vec2 vs1[num];
<a name="l00815"></a>00815             getArcVec(20,29.8+(2.85/tan(<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12.0)),2.85/sin(<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12),11*<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12,13*<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12,vs1,num);
<a name="l00816"></a>00816             
<a name="l00818"></a>00818             b2Vec2 vs2[num];
<a name="l00819"></a>00819             getArcVec(20,30.2+(2.85/tan(<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12.0)),2.85/sin(<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12),13*<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12,11*<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12,vs2,num);
<a name="l00820"></a>00820             
<a name="l00822"></a>00822             b2Vec2 vs[2*num];
<a name="l00823"></a>00823             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;num;i++)
<a name="l00824"></a>00824                 vs[i]=vs1[i];
<a name="l00825"></a>00825             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=num;i&lt;2*num;i++)
<a name="l00826"></a>00826                 vs[i]=vs2[i-num];
<a name="l00827"></a>00827             
<a name="l00829"></a>00829             b2BodyDef bd;
<a name="l00830"></a>00830             bd.type = b2_dynamicBody;
<a name="l00831"></a>00831             bd.position.Set(0.0f,0.0f);
<a name="l00832"></a>00832             b2Body* body = m_world-&gt;CreateBody(&amp;bd);
<a name="l00833"></a>00833             
<a name="l00835"></a>00835             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;num-1;i++){
<a name="l00836"></a>00836                 b2PolygonShape shape;
<a name="l00837"></a>00837                 b2Vec2 a[num]={vs[2*num-i-1],vs[2*num-i-2],vs[i+1],vs[i]};
<a name="l00838"></a>00838                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;num;i++){
<a name="l00839"></a>00839                     <span class="comment">//printf(&quot;%f %f\n&quot;,a[i].x,a[i].y);</span>
<a name="l00840"></a>00840                 }
<a name="l00841"></a>00841 
<a name="l00842"></a>00842                 shape.Set(a,4);
<a name="l00843"></a>00843                 b2FixtureDef fd;
<a name="l00844"></a>00844                 fd.shape = &amp;shape;
<a name="l00845"></a>00845                 fd.density = 0.10f;
<a name="l00846"></a>00846                 fd.friction = 1.0f;
<a name="l00847"></a>00847                 body-&gt;CreateFixture(&amp;fd);   
<a name="l00848"></a>00848             }
<a name="l00849"></a>00849             <span class="comment">//shape.Set(vs,8);</span>
<a name="l00850"></a>00850             <span class="comment">//shape.SetAsBox(2.85f, 0.2f);</span>
<a name="l00851"></a>00851 
<a name="l00852"></a>00852         }
<a name="l00853"></a>00853 
<a name="l00855"></a>00855         
<a name="l00856"></a>00856         
<a name="l00858"></a>00858         {   
<a name="l00859"></a>00859             drawArc(20,16+(2.85/tan(<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12)),2.85/sin(<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12),9*<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12,11*<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12+0.01,10);
<a name="l00860"></a>00860             drawArc(20,16+(2.85/tan(<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12)),2.85/sin(<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12),13*<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12-0.01,15*<a class="code" href="dominos_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/12+0.01,10);
<a name="l00861"></a>00861 
<a name="l00862"></a>00862         }
<a name="l00863"></a>00863 
<a name="l00864"></a>00864     }
<a name="l00865"></a>00865 
<a name="l00866"></a><a class="code" href="namespacecs296.html#a6a02c1b92c2165c5e723308bcb9c340c">00866</a>     <a class="code" href="structcs296_1_1sim__t.html">sim_t</a> *<a class="code" href="namespacecs296.html#a6a02c1b92c2165c5e723308bcb9c340c">sim</a> = <span class="keyword">new</span> <a class="code" href="structcs296_1_1sim__t.html">sim_t</a>(<span class="stringliteral">&quot;Dominos&quot;</span>, dominos_t::create);
<a name="l00867"></a>00867 }
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 10 2013 14:15:17 for CS296 Base Code Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
